<?php
// تعريف اسم الملف
$filename = "example.txt";

// ----------------------
// 1. التحقق من وجود الملف
// ----------------------
if (file_exists($filename)) {
    echo "الملف موجود: $filename<br>";
} else {
    echo "الملف غير موجود. سيتم إنشاؤه لاحقًا.<br>";
}

// ----------------------
// 2. إنشاء ملف وكتابة محتوى
// ----------------------
$contentToWrite = "هذا نص جديد تمت إضافته إلى الملف.\n";

if (file_put_contents($filename, $contentToWrite)) {
    echo "تم إنشاء الملف أو الكتابة عليه بنجاح: $filename<br>";
} else {
    echo "فشل في إنشاء الملف أو الكتابة عليه.<br>";
}

// ----------------------
// 3. فتح الملف وقراءته
// ----------------------
if (file_exists($filename)) {
    echo "قراءة محتويات الملف:<br>";
    $file = fopen($filename, "r"); // فتح الملف في وضع القراءة فقط
    if ($file) {
        while (($line = fgets($file)) !== false) {
            echo htmlspecialchars($line) . "<br>"; // طباعة كل سطر مع ترميز خاص للأمان
        }
        fclose($file); // إغلاق الملف بعد القراءة
    } else {
        echo "فشل في فتح الملف للقراءة.<br>";
    }
}

// ----------------------
// 4. الكتابة في الملف (إلحاق البيانات)
// ----------------------
$newContent = "تمت إضافة هذا السطر الجديد.\n";
$file = fopen($filename, "a"); // فتح الملف في وضع الإلحاق
if ($file) {
    if (fwrite($file, $newContent)) {
        echo "تمت إضافة النص الجديد بنجاح إلى الملف.<br>";
    } else {
        echo "فشل في كتابة النص الجديد إلى الملف.<br>";
    }
    fclose($file); // إغلاق الملف بعد الكتابة
}

// ----------------------
// 5. قراءة الملف بالكامل دفعة واحدة
// ----------------------
if (file_exists($filename)) {
    echo "محتوى الملف بالكامل:<br>";
    $fullContent = file_get_contents($filename); // قراءة الملف بالكامل دفعة واحدة
    echo nl2br(htmlspecialchars($fullContent)); // عرض النص مع الحفاظ على تنسيق الأسطر
}

// ----------------------
// 6. حذف الملف (اختياري)
// ----------------------
// يمكنك تفعيل هذا الجزء إذا كنت تريد حذف الملف
// if (unlink($filename)) {
//     echo "تم حذف الملف: $filename<br>";
// } else {
//     echo "فشل في حذف الملف.<br>";
// }

?>
